	/* 
	*	@author - Om Shankar
	*	@Client - gsK, NovoNordisk
	*	@file - additionals, ui and file-operations
	*/

function deleteFormula(a,b,c){var d="action=deletingFormula&reportType="+b+"&fileName="+a+"&formulaName="+c;$.ajax({type:"POST",url:"fileOps.php",data:d,processData:true,success:function(a){TINY.box.show(a,0,0,0,0,2);setTimeout('loadList(true,"undefined");',2500)},error:function(){}})}function loadFormula(a,b,c){if($("div.hasElem","#wBoard").length>0)if(confirm('Clear WorkBoard to Load Formula - "'+b+'" ?'))clearWB();else return false;TINY.box.show("Loading Formula",0,0,0,0,2);$.ajax({type:"POST",url:"fileOps.php",data:"action=loadingContents&reportType="+c+"&fileName="+a,processData:true,dataType:"json",success:function(a){$("#descTable").find("td.cName").html("<b>"+a.companyName+"</b>").end().find("td.rType").html("<b>"+a.reportType+"</b>").end().find("td.fName").html("<b>"+a.formulaName+"</b>");var b=a.formulaData.length-1;for(var c=0;c<b;c++){var d=$("div.unitDiv","table#playGroundTable").eq(c);var e=a.formulaData[c];var f=$('<div class="subDrag"></div>');if(e.type=="formula"){d.addClass("hasSubForm");f.html(e.text)}else if(e.type=="expression"){var g=JSON.stringify(e.expData);var h=e.text;f.data("expData",g).html(h);d.attr("title",e.title).addClass("expRession")}else if(e.type=="operator"||e.type=="number"||e.type=="package_size"||e.type=="cpi"||e.type=="min_max"){var i=e.dataelem;var h="";if(i=="plus")h="+";else if(i=="minus")h="&#8211";else if(i=="div")h="/";else h=e.text;if(e.wac!="")f.attr("wac",e.wac);if(e.label!="")f.attr("label",e.label);if(e.source!="")f.attr("source",e.source);if(e.formulaval!="")f.attr("formulaval",e.formulaval);if(e.compval!="")f.attr("compval",e.compval);if(e.yearval!="")f.attr("yearval",e.yearval);if(e.monthval!="")f.attr("monthval",e.monthval);if(e.mmtype!="")f.attr("mmtype",e.mmtype);f.addClass(e.type).attr("dataelem",i).html(h)}else{f.attr("cmpid",e.cmpid).html(e.text)}f.attr("id","_"+d.attr("id")).draggable({scope:"draG",helper:"clone",revert:"invalid"});d.append(f).addClass("hasElem");if(e.type=="number")d.addClass("hasNum");if(e.type=="package_size")d.addClass("pkgSize");if(e.type=="cpi")d.addClass("cpiInd");if(e.type=="min_max")d.addClass("minMaxCmp")}$("div.hasElem","table#playGroundTable").find(".subDrag").each(function(b){var c=$(this);var d=a.formulaData[b];if(d.formID){var e=d.formID+"."+fileExt;$.ajax({type:"POST",url:"fileOps.php",data:"action=loadingContents&reportType="+d.reportType+"&fileName="+e,processData:true,dataType:"json",success:function(a){c.data("theData",{formulaName:d.text,fID:d.formID,reportType:a.reportType,businessVer:d.businessVer})}})}});$("#currentFormulaFID").val(a.fID);$("#currentFormulaName").val(a.formulaName);generateLiveFormula()}});$("div.unitDiv","table#playGroundTable").removeClass("hasElem hasSubForm isSelected").html("");return true}function loadList(a,b){var c=b!="undefined"?b:"All Available";var d="Loading <b>"+companyTag+" - "+c+"</b> Formula";var e='<span id="straightLine">'+d+"</span>";infoUpdate(e);var f="action=loadingList&reportType="+b,g=$("#theFormulae").find(".theFormulae");$.ajax({type:"POST",url:"fileOps.php",data:f,processData:true,success:function(a){var b=$('<tr> <td align="center"> <div class="formulaElem"> Loading Data.. </div> </td> </tr>');var c=a.split("~");var d=c.length-1;$("#theFormulae").find(".theFormulae").html("");for(var e=0;e<d;e++){g.append(b)}g.find(".formulaElem").each(function(a){var b=c[a].split("--")[0];var d=c[a].split("--")[1];var e="action=loadingContents&reportType="+b+"&fileName="+d;var f=$(this);$.ajax({type:"POST",url:"fileOps.php",data:e,processData:true,dataType:"json",success:function(a){f.data("theData",{formulaName:a.formulaName,fID:a.fID,reportType:b,businessVer:a.businessVer}).draggable({scope:"draG",helper:"clone",revert:"invalid"}).html(a.formulaName)}})})},error:function(a){var b="- Problem in <b>AJAX</b> Call -"+"<br/>- Could not Load Formula List -"+"<br/>- Error Code Status - <b>"+a.status+"</b>";notifyAJAXSpt(b)}});var h=$("div#theFormulae").find("table.theFormulae").parent("div");h.animate({scrollTop:h.attr("scrollHeight")},500)}function poupulateMinMax(a,b,c,d){var e="action=loadingList&reportType=undefined";$.ajax({type:"POST",url:"fileOps.php",data:e,processData:true,success:function(e){var f=e.split("~"),g=f.length-1;for(var h=0;h<g;h++){var i=f[h].split("--")[0];var j=f[h].split("--")[1];var k="action=loadingContents&reportType="+i+"&fileName="+j;$.ajax({type:"POST",url:"fileOps.php",data:k,processData:true,dataType:"json",success:function(b){var d=b.formulaName;var e=c==b.formulaName?'selected="selected"':"";if(d!="")$("#"+a).append('<option value="'+d+'" '+e+">"+d+"</option>")}})}$("#compDiv").find(".theElementsTable").find(".draG").each(function(){var a=tRim($(this).text());var c=d==a?'selected="selected"':"";$("#"+b).append('<option value="'+a+'" '+c+">"+a+"</option>")})}})}function loadComps(){var a="action=loadingComponents";$.ajax({type:"POST",url:"fileOps.php",data:a,processData:true,dataType:"json",success:function(a){if(a){$(a.componentList).each(function(a,b){var c=$('<div cmpid="'+this.cmpid+'" class="draG"> '+this.text+" </div>").draggable({revert:true,helper:"clone",cursor:"move",scope:"draG"});var d=$("<tr></tr>"),e=$("<td></td>");c.appendTo(e.appendTo(d.appendTo($(".theElementsTable","#compDiv"))))})}}})}function updateFormula(a,b,c,d,e,f){if(a!=""){var g="action=savingFormula&updating="+d+"&formulaID="+a+"&reportType="+e+"&prevReportType="+f+"&formulaName="+b+"&contentString="+c;$.ajax({type:"POST",url:"fileOps.php",data:g,processData:true,success:function(a){var b='<span id="straightLine">'+a+"</span>";infoUpdate(b);$("#prevReportType").attr("val",e)}})}}function saveFormula(a,b,c,d,e){if(a!=""){var f="action=savingFormula&updating="+d+"&formulaID="+a+"&reportType="+e+"&formulaName="+b+"&contentString="+c;$.ajax({type:"POST",url:"fileOps.php",data:f,processData:true,success:function(a){TINY.box.fill(a,0,0,0,1);$("#tinybox").find("*").css("display","");setTimeout("TINY.box.hide();",1580);setTimeout('loadList(true,"'+e+'");',2500)}})}}function notifyAJAXSpt(a){var b=a?a:'<b style="color:#660011; text-align: center; display: block;">Whoops !!</b>'+"</br>"+'- No <b style="color:#224488;">AJAX</b> Support Detected -'+"</br>"+'- Run This Application on a Server that understands <b style="color:#225533;">PHP</b> -'+"</br>"+"</br>"+'<span class="dismiss gen-button" onclick="TINY.box.hide();">\tDismiss </span>'+"</br>";TINY.box.show(b,0,0,0,0);$("#tinycontent").addClass("notify");$("#tinycontent").click(function(){TINY.box.hide();$(this).removeClass("notify").unbind("click")});return false}function generateLiveFormula(){workBoard.find("div.unitDiv").each(function(a,b){var c=$(this)[0].className.split("unitDiv ui-droppable")[1];if($(this).find(".subDrag").length==0){$(this).removeClass(c).html("").removeAttr("title")}});var a="";workBoard.find("div.hasElem").each(function(){if($(this).hasClass("hasNum")){var b=$(this).find(".subDrag").attr("dataelem");if(b)a+='<span pointer="'+this.id+'">'+b+"</span>";else a+='<span pointer="'+this.id+'">- Value Not Set -</span>'}else{a+='<span pointer="'+this.id+'">'+$(this).text()+"</span>"}});$("#straightLineDiv").html('<b>Formula:   </b><span id="straightLine">'+a+"</span>");$("#straightLineDiv").effect("highlight",{color:"#c0b1a5"},500)}function restoreWidget(a,b){$("#"+a,"div#toolBar").remove();$("#"+b).fadeIn(500)}function createToolbarBtn(a,b,c){var d=$('<div id="'+a+'" class="toolbarBtn" willrestore="'+c+'">'+b+"</div>");if($("#toolBar").find(".toolbarBtn").length==0&&!isIE){if(isWebkit){var e={"-webkit-border-top-right-radius":"3px","-webkit-border-bottom-right-radius":"3px"}}if(isMozilla){var e={"-moz-border-radius-topright":"3px","-moz-border-radius-bottomright":"3px"}}d.css(e)}$("#toolBar").prepend(d);if($("#toolBar").find(".toolbarBtn").length==5)$("#widgetsToggle").attr("state","active").text("Open All")}function clearWB(){$("#straightLineDiv").empty();$("div.unitDiv","#wBoard").each(function(){var a=$(this)[0].className.split("unitDiv ui-droppable")[1];$(this).html("").removeClass(a)})}function infoUpdate(a){var b=$("#formulaDiv").find("#straightLineDiv");var c=b.css("background-color");b.html(a).stop().animate({backgroundColor:"#B8CED3"},1e3,function(){$(this).find("span").fadeOut(300)});b.animate({backgroundColor:c},500,function(){$(this).find("span").remove()})}function highLightPG(a){playgRound.effect("highlight",{color:"#a6b4bf"},500,a)}function T$(a){return document.getElementById(a)}(function(a,b){function c(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(!a.ui.version){a.extend(a.ui,{version:"1.8.4",plugin:{add:function(b,c,d){b=a.ui[b].prototype;for(var e in d){b.plugins[e]=b.plugins[e]||[];b.plugins[e].push([c,d[e]])}},call:function(a,b,c){if((b=a.plugins[b])&&a.element[0].parentNode)for(var d=0;d<b.length;d++)a.options[b[d][0]]&&b[d][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return false;c=c&&c==="left"?"scrollLeft":"scrollTop";var d=false;if(b[c]>0)return true;b[c]=1;d=b[c]>0;b[c]=0;return d},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return typeof b==="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus();c&&c.call(d)},b)}):this._focus.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none")},scrollParent:function(){var b;b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){c=a(this[0]);for(var d;c.length&&c[0]!==document;){d=c.css("position");if(d==="absolute"||d==="relative"||d==="fixed"){d=parseInt(c.css("zIndex"));if(!isNaN(d)&&d!=0)return d}c=c.parent()}}return 0}});a.each(["Width","Height"],function(c,d){function e(b,c,d,e){a.each(f,function(){c-=parseFloat(a.curCSS(b,"padding"+this,true))||0;if(d)c-=parseFloat(a.curCSS(b,"border"+this+"Width",true))||0;if(e)c-=parseFloat(a.curCSS(b,"margin"+this,true))||0});return c}var f=d==="Width"?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){if(c===b)return h["inner"+d].call(this);return this.each(function(){a.style(this,g,e(this,c)+"px")})};a.fn["outer"+d]=function(b,c){if(typeof b!=="number")return h["outer"+d].call(this,b);return this.each(function(){a.style(this,g,e(this,b,true,c)+"px")})}});a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){var d=b.nodeName.toLowerCase(),e=a.attr(b,"tabindex");if("area"===d){d=b.parentNode;e=d.name;if(!b.href||!e||d.nodeName.toLowerCase()!=="map")return false;b=a("img[usemap=#"+e+"]")[0];return!!b&&c(b)}return(/input|select|textarea|button|object/.test(d)?!b.disabled:"a"==d?b.href||!isNaN(e):!isNaN(e))&&c(b)},tabbable:function(b){var c=a.attr(b,"tabindex");return(isNaN(c)||c>=0)&&a(b).is(":focusable")}})}})(jQuery);(function(a,b){var c=a.fn.remove;a.fn.remove=function(b,d){return this.each(function(){if(!d)if(!b||a.filter(b,[this]).length)a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")});return c.call(a(this),b,d)})};a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1];f=e+"-"+b;if(!d){d=c;c=a.Widget}a.expr[":"][f]=function(c){return!!a.data(c,b)};a[e]=a[e]||{};a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};c=new c;c.options=a.extend(true,{},c.options);a[e][b].prototype=a.extend(true,c,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d);a.widget.bridge(b,a[e][b])};a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e==="string",g=Array.prototype.slice.call(arguments,1),h=this;e=!f&&g.length?a.extend.apply(null,[true,e].concat(g)):e;if(f&&e.substring(0,1)==="_")return h;f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b){h=f;return false}}):this.each(function(){var b=a.data(this,c);if(b){e&&b.option(e);b._init()}else a.data(this,c,new d(e,this))});return h}};a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(b,c){a.data(c,this.widgetName,this);this.element=a(c);this.options=a.extend(true,{},this.options,a.metadata&&a.metadata.get(c)[this.widgetName],b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()});this._create();this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c,f=this;if(arguments.length===0)return a.extend({},f.options);if(typeof c==="string"){if(d===b)return this.options[c];e={};e[c]=d}a.each(e,function(a,b){f._setOption(a,b)});return f},_setOption:function(a,b){this.options[a]=b;if(a==="disabled")this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b);return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(b,c,d){var e=this.options[b];c=a.Event(c);c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();d=d||{};if(c.originalEvent){b=a.event.props.length;for(var f;b;){f=a.event.props[--b];c[f]=c.originalEvent[f]}}this.element.trigger(c,d);return!(a.isFunction(e)&&e.call(this.element[0],c,d)===false||c.isDefaultPrevented())}}})(jQuery);(function(a){a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var a=this;this.element.bind("mousedown."+this.widgetName,function(b){return a._mouseDown(b)}).bind("click."+this.widgetName,function(b){if(a._preventClickEvent){a._preventClickEvent=false;b.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(b){b.originalEvent=b.originalEvent||{};if(!b.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var d=this,e=b.which==1,f=typeof this.options.cancel=="string"?a(b.target).parents().add(b.target).filter(this.options.cancel).length:false;if(!e||f||!this._mouseCapture(b))return true;this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet)this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=true},this.options.delay);if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=this._mouseStart(b)!==false;if(!this._mouseStarted){b.preventDefault();return true}}this._mouseMoveDelegate=function(a){return d._mouseMove(a)};this._mouseUpDelegate=function(a){return d._mouseUp(a)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);a.browser.safari||b.preventDefault();return b.originalEvent.mouseHandled=true}},_mouseMove:function(b){if(a.browser.msie&&!b.button)return this._mouseUp(b);if(this._mouseStarted){this._mouseDrag(b);return b.preventDefault()}if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b))(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==false)?this._mouseDrag(b):this._mouseUp(b);return!this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=b.target==this._mouseDownEvent.target;this._mouseStop(b)}return false},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);(function(a){a.ui=a.ui||{};var b=/left|center|right/,c=/top|center|bottom/,d=a.fn.position,e=a.fn.offset;a.fn.position=function(e){if(!e||!e.of)return d.apply(this,arguments);e=a.extend({},e);var f=a(e.of),g=(e.collision||"flip").split(" "),h=e.offset?e.offset.split(" "):[0,0],i,j,k;if(e.of.nodeType===9){i=f.width();j=f.height();k={top:0,left:0}}else if(e.of.scrollTo&&e.of.document){i=f.width();j=f.height();k={top:f.scrollTop(),left:f.scrollLeft()}}else if(e.of.preventDefault){e.at="left top";i=j=0;k={top:e.of.pageY,left:e.of.pageX}}else{i=f.outerWidth();j=f.outerHeight();k=f.offset()}a.each(["my","at"],function(){var a=(e[this]||"").split(" ");if(a.length===1)a=b.test(a[0])?a.concat(["center"]):c.test(a[0])?["center"].concat(a):["center","center"];a[0]=b.test(a[0])?a[0]:"center";a[1]=c.test(a[1])?a[1]:"center";e[this]=a});if(g.length===1)g[1]=g[0];h[0]=parseInt(h[0],10)||0;if(h.length===1)h[1]=h[0];h[1]=parseInt(h[1],10)||0;if(e.at[0]==="right")k.left+=i;else if(e.at[0]==="center")k.left+=i/2;if(e.at[1]==="bottom")k.top+=j;else if(e.at[1]==="center")k.top+=j/2;k.left+=h[0];k.top+=h[1];return this.each(function(){var b=a(this),c=b.outerWidth(),d=b.outerHeight(),f=a.extend({},k);if(e.my[0]==="right")f.left-=c;else if(e.my[0]==="center")f.left-=c/2;if(e.my[1]==="bottom")f.top-=d;else if(e.my[1]==="center")f.top-=d/2;f.left=parseInt(f.left);f.top=parseInt(f.top);a.each(["left","top"],function(b,k){a.ui.position[g[b]]&&a.ui.position[g[b]][k](f,{targetWidth:i,targetHeight:j,elemWidth:c,elemHeight:d,offset:h,my:e.my,at:e.at})});a.fn.bgiframe&&b.bgiframe();b.offset(a.extend(f,{using:e.using}))})};a.ui.position={fit:{left:function(b,c){var d=a(window);c=b.left+c.elemWidth-d.width()-d.scrollLeft();b.left=c>0?b.left-c:Math.max(0,b.left)},top:function(b,c){var d=a(window);c=b.top+c.elemHeight-d.height()-d.scrollTop();b.top=c>0?b.top-c:Math.max(0,b.top)}},flip:{left:function(b,c){if(c.at[0]!=="center"){var d=a(window);d=b.left+c.elemWidth-d.width()-d.scrollLeft();var e=c.my[0]==="left"?-c.elemWidth:c.my[0]==="right"?c.elemWidth:0,f=-2*c.offset[0];b.left+=b.left<0?e+c.targetWidth+f:d>0?e-c.targetWidth+f:0}},top:function(b,c){if(c.at[1]!=="center"){var d=a(window);d=b.top+c.elemHeight-d.height()-d.scrollTop();var e=c.my[1]==="top"?-c.elemHeight:c.my[1]==="bottom"?c.elemHeight:0,f=c.at[1]==="top"?c.targetHeight:-c.targetHeight,g=-2*c.offset[1];b.top+=b.top<0?e+c.targetHeight+g:d>0?e+f+g:0}}}};if(!a.offset.setOffset){a.offset.setOffset=function(b,c){if(/static/.test(a.curCSS(b,"position")))b.style.position="relative";var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",true),10)||0,g=parseInt(a.curCSS(b,"left",true),10)||0;e={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,e):d.css(e)};a.fn.offset=function(b){var c=this[0];if(!c||!c.ownerDocument)return null;if(b)return this.each(function(){a.offset.setOffset(this,b)});return e.call(this)}}})(jQuery);(function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position")))this.element[0].style.position="relative";this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this}},_mouseCapture:function(b){var c=this.options;if(this.helper||c.disabled||a(b.target).is(".ui-resizable-handle"))return false;this.handle=this._getHandle(b);if(!this.handle)return false;return true},_mouseStart:function(b){var c=this.options;this.helper=this._createHelper(b);this._cacheHelperProportions();if(a.ui.ddmanager)a.ui.ddmanager.current=this;this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);c.containment&&this._setContainment();if(this._trigger("start",b)===false){this._clear();return false}this._cacheHelperProportions();a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(b,true);return true},_mouseDrag:function(b,c){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!c){c=this._uiHash();if(this._trigger("drag",b,c)===false){this._mouseUp({});return false}this.position=c.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);return false},_mouseStop:function(b){var c=false;if(a.ui.ddmanager&&!this.options.dropBehaviour)c=a.ui.ddmanager.drop(this,b);if(this.dropped){c=this.dropped;this.dropped=false}if(!this.element[0]||!this.element[0].parentNode)return false;if(this.options.revert=="invalid"&&!c||this.options.revert=="valid"&&c||this.options.revert===true||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var e=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){e._trigger("stop",b)!==false&&e._clear()})}else this._trigger("stop",b)!==false&&this._clear();return false},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length?true:false;a(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==b.target)c=true});return c},_createHelper:function(b){var c=this.options;b=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):c.helper=="clone"?this.element.clone():this.element;b.parents("body").length||b.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo);b[0]!=this.element[0]&&!/(fixed|absolute)/.test(b.css("position"))&&b.css("position","absolute");return b},_adjustOffsetFromHelper:function(b){if(typeof b=="string")b=b.split(" ");if(a.isArray(b))b={left:+b[0],top:+b[1]||0};if("left"in b)this.offset.click.left=b.left+this.margins.left;if("right"in b)this.offset.click.left=this.helperProportions.width-b.right+this.margins.left;if("top"in b)this.offset.click.top=b.top+this.margins.top;if("bottom"in b)this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if(b.containment=="parent")b.containment=this.helper[0].parentNode;if(b.containment=="document"||b.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&b.containment.constructor!=Array){var c=a(b.containment)[0];if(c){b=a(b.containment).offset();var e=a(c).css("overflow")!="hidden";this.containment=[b.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,b.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}}else if(b.containment.constructor==Array)this.containment=b.containment},_convertPositionTo:function(b,c){if(!c)c=this.position;b=b=="absolute"?1:-1;var e=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(e[0].tagName);return{top:c.top+this.offset.relative.top*b+this.offset.parent.top*b-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:e.scrollTop())*b),left:c.left+this.offset.relative.left*b+this.offset.parent.left*b-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())*b)}},_generatePosition:function(b){var c=this.options,e=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,f=/(html|body)/i.test(e[0].tagName),g=b.pageX,h=b.pageY;if(this.originalPosition){if(this.containment){if(b.pageX-this.offset.click.left<this.containment[0])g=this.containment[0]+this.offset.click.left;if(b.pageY-this.offset.click.top<this.containment[1])h=this.containment[1]+this.offset.click.top;if(b.pageX-this.offset.click.left>this.containment[2])g=this.containment[2]+this.offset.click.left;if(b.pageY-this.offset.click.top>this.containment[3])h=this.containment[3]+this.offset.click.top}if(c.grid){h=this.originalPageY+Math.round((h-this.originalPageY)/c.grid[1])*c.grid[1];h=this.containment?!(h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3])?h:!(h-this.offset.click.top<this.containment[1])?h-c.grid[1]:h+c.grid[1]:h;g=this.originalPageX+Math.round((g-this.originalPageX)/c.grid[0])*c.grid[0];g=this.containment?!(g-this.offset.click.left<this.containment[0]||g-this.offset.click.left>this.containment[2])?g:!(g-this.offset.click.left<this.containment[0])?g-c.grid[0]:g+c.grid[0]:g}}return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():f?0:e.scrollTop()),left:g-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():f?0:e.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(b,c,e){e=e||this._uiHash();a.ui.plugin.call(this,b,[c,e]);if(b=="drag")this.positionAbs=this._convertPositionTo("absolute");return a.Widget.prototype._trigger.call(this,b,c,e)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.extend(a.ui.draggable,{version:"1.8.4"});a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var e=a(this).data("draggable"),f=e.options,g=a.extend({},c,{item:e.element});e.sortables=[];a(f.connectToSortable).each(function(){var c=a.data(this,"sortable");if(c&&!c.options.disabled){e.sortables.push({instance:c,shouldRevert:c.options.revert});c._refreshItems();c._trigger("activate",b,g)}})},stop:function(b,c){var e=a(this).data("draggable"),f=a.extend({},c,{item:e.element});a.each(e.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;e.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert)this.instance.options.revert=true;this.instance._mouseStop(b);this.instance.options.helper=this.instance.options._helper;e.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",b,f)}})},drag:function(b,c){var e=a(this).data("draggable"),f=this;a.each(e.sortables,function(){this.instance.positionAbs=e.positionAbs;this.instance.helperProportions=e.helperProportions;this.instance.offset.click=e.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(f).clone().appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return c.helper[0]};b.target=this.instance.currentItem[0];this.instance._mouseCapture(b,true);this.instance._mouseStart(b,true,true);this.instance.offset.click.top=e.offset.click.top;this.instance.offset.click.left=e.offset.click.left;this.instance.offset.parent.left-=e.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=e.offset.parent.top-this.instance.offset.parent.top;e._trigger("toSortable",b);e.dropped=this.instance.element;e.currentItem=e.element;this.instance.fromOutside=e}this.instance.currentItem&&this.instance._mouseDrag(b)}else if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",b,this.instance._uiHash(this.instance));this.instance._mouseStop(b,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&this.instance.placeholder.remove();e._trigger("fromSortable",b);e.dropped=false}})}});a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("draggable").options;if(b.css("cursor"))c._cursor=b.css("cursor");b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}});a.ui.plugin.add("draggable","iframeFix",{start:function(){var b=a(this).data("draggable").options;a(b.iframeFix===true?"iframe":b.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")})},stop:function(){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}});a.ui.plugin.add("draggable","opacity",{start:function(b,c){b=a(c.helper);c=a(this).data("draggable").options;if(b.css("opacity"))c._opacity=b.css("opacity");b.css("opacity",c.opacity)},stop:function(b,c){b=a(this).data("draggable").options;b._opacity&&a(c.helper).css("opacity",b._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("draggable");if(b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML")b.overflowOffset=b.scrollParent.offset()},drag:function(b){var c=a(this).data("draggable"),e=c.options,f=false;if(c.scrollParent[0]!=document&&c.scrollParent[0].tagName!="HTML"){if(!e.axis||e.axis!="x")if(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity)c.scrollParent[0].scrollTop=f=c.scrollParent[0].scrollTop+e.scrollSpeed;else if(b.pageY-c.overflowOffset.top<e.scrollSensitivity)c.scrollParent[0].scrollTop=f=c.scrollParent[0].scrollTop-e.scrollSpeed;if(!e.axis||e.axis!="y")if(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity)c.scrollParent[0].scrollLeft=f=c.scrollParent[0].scrollLeft+e.scrollSpeed;else if(b.pageX-c.overflowOffset.left<e.scrollSensitivity)c.scrollParent[0].scrollLeft=f=c.scrollParent[0].scrollLeft-e.scrollSpeed}else{if(!e.axis||e.axis!="x")if(b.pageY-a(document).scrollTop()<e.scrollSensitivity)f=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed);else if(a(window).height()-(b.pageY-a(document).scrollTop())<e.scrollSensitivity)f=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed);if(!e.axis||e.axis!="y")if(b.pageX-a(document).scrollLeft()<e.scrollSensitivity)f=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed);else if(a(window).width()-(b.pageX-a(document).scrollLeft())<e.scrollSensitivity)f=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed)}f!==false&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}});a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("draggable"),c=b.options;b.snapElements=[];a(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var c=a(this),e=c.offset();this!=b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:e.top,left:e.left})})},drag:function(b,c){for(var e=a(this).data("draggable"),f=e.options,g=f.snapTolerance,h=c.offset.left,i=h+e.helperProportions.width,j=c.offset.top,k=j+e.helperProportions.height,l=e.snapElements.length-1;l>=0;l--){var m=e.snapElements[l].left,n=m+e.snapElements[l].width,o=e.snapElements[l].top,p=o+e.snapElements[l].height;if(m-g<h&&h<n+g&&o-g<j&&j<p+g||m-g<h&&h<n+g&&o-g<k&&k<p+g||m-g<i&&i<n+g&&o-g<j&&j<p+g||m-g<i&&i<n+g&&o-g<k&&k<p+g){if(f.snapMode!="inner"){var q=Math.abs(o-k)<=g,r=Math.abs(p-j)<=g,s=Math.abs(m-i)<=g,t=Math.abs(n-h)<=g;if(q)c.position.top=e._convertPositionTo("relative",{top:o-e.helperProportions.height,left:0}).top-e.margins.top;if(r)c.position.top=e._convertPositionTo("relative",{top:p,left:0}).top-e.margins.top;if(s)c.position.left=e._convertPositionTo("relative",{top:0,left:m-e.helperProportions.width}).left-e.margins.left;if(t)c.position.left=e._convertPositionTo("relative",{top:0,left:n}).left-e.margins.left}var u=q||r||s||t;if(f.snapMode!="outer"){q=Math.abs(o-j)<=g;r=Math.abs(p-k)<=g;s=Math.abs(m-h)<=g;t=Math.abs(n-i)<=g;if(q)c.position.top=e._convertPositionTo("relative",{top:o,left:0}).top-e.margins.top;if(r)c.position.top=e._convertPositionTo("relative",{top:p-e.helperProportions.height,left:0}).top-e.margins.top;if(s)c.position.left=e._convertPositionTo("relative",{top:0,left:m}).left-e.margins.left;if(t)c.position.left=e._convertPositionTo("relative",{top:0,left:n-e.helperProportions.width}).left-e.margins.left}if(!e.snapElements[l].snapping&&(q||r||s||t||u))e.options.snap.snap&&e.options.snap.snap.call(e.element,b,a.extend(e._uiHash(),{snapItem:e.snapElements[l].item}));e.snapElements[l].snapping=q||r||s||t||u}else{e.snapElements[l].snapping&&e.options.snap.release&&e.options.snap.release.call(e.element,b,a.extend(e._uiHash(),{snapItem:e.snapElements[l].item}));e.snapElements[l].snapping=false}}}});a.ui.plugin.add("draggable","stack",{start:function(){var b=a(this).data("draggable").options;b=a.makeArray(a(b.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(b.length){var c=parseInt(b[0].style.zIndex)||0;a(b).each(function(a){this.style.zIndex=c+a});this[0].style.zIndex=c+b.length}}});a.ui.plugin.add("draggable","zIndex",{start:function(b,c){b=a(c.helper);c=a(this).data("draggable").options;if(b.css("zIndex"))c._zIndex=b.css("zIndex");b.css("zIndex",c.zIndex)},stop:function(b,c){b=a(this).data("draggable").options;b._zIndex&&a(c.helper).css("zIndex",b._zIndex)}})})(jQuery);(function(a){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(c)?c:function(a){return a.is(c)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[];a.ui.ddmanager.droppables[b.scope].push(this);b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var b=a.ui.ddmanager.droppables[this.options.scope],c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(b,c){if(b=="accept")this.accept=a.isFunction(c)?c:function(a){return a.is(c)};a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;if(!(!c||(c.currentItem||c.element)[0]==this.element[0]))if(this.accept.call(this.element[0],c.currentItem||c.element)){this.options.hoverClass&&this.element.addClass(this.options.hoverClass);this._trigger("over",b,this.ui(c))}},_out:function(b){var c=a.ui.ddmanager.current;if(!(!c||(c.currentItem||c.element)[0]==this.element[0]))if(this.accept.call(this.element[0],c.currentItem||c.element)){this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("out",b,this.ui(c))}},_drop:function(b,c){var e=c||a.ui.ddmanager.current;if(!e||(e.currentItem||e.element)[0]==this.element[0])return false;var f=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");if(b.options.greedy&&!b.options.disabled&&b.options.scope==e.options.scope&&b.accept.call(b.element[0],e.currentItem||e.element)&&a.ui.intersect(e,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)){f=true;return false}});if(f)return false;if(this.accept.call(this.element[0],e.currentItem||e.element)){this.options.activeClass&&this.element.removeClass(this.options.activeClass);this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("drop",b,this.ui(e));return this.element}return false},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});a.extend(a.ui.droppable,{version:"1.8.4"});a.ui.intersect=function(b,c,e){if(!c.offset)return false;var f=(b.positionAbs||b.position.absolute).left,g=f+b.helperProportions.width,h=(b.positionAbs||b.position.absolute).top,i=h+b.helperProportions.height,j=c.offset.left,k=j+c.proportions.width,l=c.offset.top,m=l+c.proportions.height;switch(e){case"fit":return j<=f&&g<=k&&l<=h&&i<=m;case"intersect":return j<f+b.helperProportions.width/2&&g-b.helperProportions.width/2<k&&l<h+b.helperProportions.height/2&&i-b.helperProportions.height/2<m;case"pointer":return a.ui.isOver((b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,l,j,c.proportions.height,c.proportions.width);case"touch":return(h>=l&&h<=m||i>=l&&i<=m||h<l&&i>m)&&(f>=j&&f<=k||g>=j&&g<=k||f<j&&g>k);default:return false}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var e=a.ui.ddmanager.droppables[b.options.scope]||[],f=c?c.type:null,g=(b.currentItem||b.element).find(":data(droppable)").andSelf(),h=0;a:for(;h<e.length;h++)if(!(e[h].options.disabled||b&&!e[h].accept.call(e[h].element[0],b.currentItem||b.element))){for(var i=0;i<g.length;i++)if(g[i]==e[h].element[0]){e[h].proportions.height=0;continue a}e[h].visible=e[h].element.css("display")!="none";if(e[h].visible){e[h].offset=e[h].element.offset();e[h].proportions={width:e[h].element[0].offsetWidth,height:e[h].element[0].offsetHeight};f=="mousedown"&&e[h]._activate.call(e[h],c)}}},drop:function(b,c){var e=false;a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(this.options){if(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance))e=e||this._drop.call(this,c);if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)){this.isout=1;this.isover=0;this._deactivate.call(this,c)}}});return e},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c);a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var e=a.ui.intersect(b,this,this.options.tolerance);if(e=!e&&this.isover==1?"isout":e&&this.isover==0?"isover":null){var f;if(this.options.greedy){var g=this.element.parents(":data(droppable):eq(0)");if(g.length){f=a.data(g[0],"droppable");f.greedyChild=e=="isover"?1:0}}if(f&&e=="isover"){f.isover=0;f.isout=1;f._out.call(f,c)}this[e]=1;this[e=="isout"?"isover":"isout"]=0;this[e=="isover"?"_over":"_out"].call(this,c);if(f&&e=="isout"){f.isout=0;f.isover=1;f._over.call(f,c)}}}})}}})(jQuery);jQuery.effects||function(a,b){function h(b,c,d,e){if(typeof b=="object"){e=c;d=null;c=b;b=c.effect}if(a.isFunction(c)){e=c;d=null;c={}}if(typeof c=="number"||a.fx.speeds[c]){e=d;d=c;c={}}if(a.isFunction(d)){e=d;d=null}c=c||{};d=d||c.duration;d=a.fx.off?0:typeof d=="number"?d:a.fx.speeds[d]||a.fx.speeds._default;e=e||c.complete;return[b,c,d,e]}function g(a,b){var c={_:0},d;for(d in b)if(a[d]!=b[d])c[d]=b[d];return c}function f(b){var c,d;for(c in b){d=b[c];if(d==null||a.isFunction(d)||c in k||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))delete b[c]}return b}function e(){var a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={},c,d;if(a&&a.length&&a[0]&&a[a[0]])for(var e=a.length;e--;){c=a[e];if(typeof a[c]=="string"){d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()});b[d]=a[c]}}else for(c in a)if(typeof a[c]==="string")b[c]=a[c];return b}function d(b,d){var e;do{e=a.curCSS(b,d);if(e!=""&&e!="transparent"||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function c(b){var c;if(b&&b.constructor==Array&&b.length==3)return b;if(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))return[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)];if(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))return[parseFloat(c[1])*2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55];if(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))return[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)];if(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))return[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)];if(/rgba\(0, 0, 0, 0\)/.exec(b))return i.transparent;return i[a.trim(b).toLowerCase()]}a.effects={};a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){if(!a.colorInit){a.start=d(a.elem,e);a.end=c(a.end);a.colorInit=true}a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"}});var i={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},j=["add","remove","toggle"],k={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.effects.animateClass=function(b,c,d,h){if(a.isFunction(d)){h=d;d=null}return this.each(function(){var i=a(this),k=i.attr("style")||" ",l=f(e.call(this)),m,q=i.attr("className");a.each(j,function(a,c){b[c]&&i[c+"Class"](b[c])});m=f(e.call(this));i.attr("className",q);i.animate(g(l,m),c,d,function(){a.each(j,function(a,c){b[c]&&i[c+"Class"](b[c])});if(typeof i.attr("style")=="object"){i.attr("style").cssText="";i.attr("style").cssText=k}else i.attr("style",k);h&&h.apply(this,arguments)})})};a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return typeof d=="boolean"||d===b?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}});a.extend(a.effects,{version:"1.8.4",save:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)b[c]!==null&&a.css(b[c],a.data("ec.storage."+b[c]))},setMode:function(a,b){if(b=="toggle")b=a.is(":hidden")?"show":"hide";return b},getBaseline:function(a,b){var c;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":a=0;break;case"center":a=.5;break;case"right":a=1;break;default:a=a[1]/b.width}return{x:a,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(true),height:b.outerHeight(true),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});b.wrap(d);d=b.parent();if(b.css("position")=="static"){d.css({position:"relative"});b.css({position:"relative"})}else{a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")});a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d);if(isNaN(parseInt(c[d],10)))c[d]="auto"});b.css({position:"relative",top:0,left:0})}return d.css(c).show()},removeWrapper:function(a){if(a.parent().is(".ui-effects-wrapper"))return a.parent().replaceWith(a);return a},setTransition:function(b,c,d,e){e=e||{};a.each(c,function(a,c){unit=b.cssUnit(c);if(unit[0]>0)e[c]=unit[0]*d+unit[1]});return e}});a.fn.extend({effect:function(b){var c=h.apply(this,arguments);c={options:c[1],duration:c[2],callback:c[3]};var d=a.effects[b];return d&&!a.fx.off?d.call(this,c):this},_show:a.fn.show,show:function(b){if(!b||typeof b=="number"||a.fx.speeds[b])return this._show.apply(this,arguments);else{var c=h.apply(this,arguments);c[1].mode="show";return this.effect.apply(this,c)}},_hide:a.fn.hide,hide:function(b){if(!b||typeof b=="number"||a.fx.speeds[b])return this._hide.apply(this,arguments);else{var c=h.apply(this,arguments);c[1].mode="hide";return this.effect.apply(this,c)}},__toggle:a.fn.toggle,toggle:function(b){if(!b||typeof b=="number"||a.fx.speeds[b]||typeof b=="boolean"||a.isFunction(b))return this.__toggle.apply(this,arguments);else{var c=h.apply(this,arguments);c[1].mode="toggle";return this.effect.apply(this,c)}},cssUnit:function(b){var c=this.css(b),d=[];a.each(["em","px","%","pt"],function(a,b){if(c.indexOf(b)>0)d=[parseFloat(c),b]});return d}});a.easing.jswing=a.easing.swing;a.extend(a.easing,{def:"easeOutQuad",swing:function(b,c,d,e,f){return a.easing[a.easing.def](b,c,d,e,f)},easeInQuad:function(a,b,c,d,e){return d*(b/=e)*b+c},easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c},easeInOutQuad:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b+c;return-d/2*(--b*(b-2)-1)+c},easeInCubic:function(a,b,c,d,e){return d*(b/=e)*b*b+c},easeOutCubic:function(a,b,c,d,e){return d*((b=b/e-1)*b*b+1)+c},easeInOutCubic:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b*b+c;return d/2*((b-=2)*b*b+2)+c},easeInQuart:function(a,b,c,d,e){return d*(b/=e)*b*b*b+c},easeOutQuart:function(a,b,c,d,e){return-d*((b=b/e-1)*b*b*b-1)+c},easeInOutQuart:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b*b*b+c;return-d/2*((b-=2)*b*b*b-2)+c},easeInQuint:function(a,b,c,d,e){return d*(b/=e)*b*b*b*b+c},easeOutQuint:function(a,b,c,d,e){return d*((b=b/e-1)*b*b*b*b+1)+c},easeInOutQuint:function(a,b,c,d,e){if((b/=e/2)<1)return d/2*b*b*b*b*b+c;return d/2*((b-=2)*b*b*b*b+2)+c},easeInSine:function(a,b,c,d,e){return-d*Math.cos(b/e*(Math.PI/2))+d+c},easeOutSine:function(a,b,c,d,e){return d*Math.sin(b/e*(Math.PI/2))+c},easeInOutSine:function(a,b,c,d,e){return-d/2*(Math.cos(Math.PI*b/e)-1)+c},easeInExpo:function(a,b,c,d,e){return b==0?c:d*Math.pow(2,10*(b/e-1))+c},easeOutExpo:function(a,b,c,d,e){return b==e?c+d:d*(-Math.pow(2,-10*b/e)+1)+c},easeInOutExpo:function(a,b,c,d,e){if(b==0)return c;if(b==e)return c+d;if((b/=e/2)<1)return d/2*Math.pow(2,10*(b-1))+c;return d/2*(-Math.pow(2,-10*--b)+2)+c},easeInCirc:function(a,b,c,d,e){return-d*(Math.sqrt(1-(b/=e)*b)-1)+c},easeOutCirc:function(a,b,c,d,e){return d*Math.sqrt(1-(b=b/e-1)*b)+c},easeInOutCirc:function(a,b,c,d,e){if((b/=e/2)<1)return-d/2*(Math.sqrt(1-b*b)-1)+c;return d/2*(Math.sqrt(1-(b-=2)*b)+1)+c},easeInElastic:function(a,b,c,d,e){a=1.70158;var f=0,g=d;if(b==0)return c;if((b/=e)==1)return c+d;f||(f=e*.3);if(g<Math.abs(d)){g=d;a=f/4}else a=f/(2*Math.PI)*Math.asin(d/g);return-(g*Math.pow(2,10*(b-=1))*Math.sin((b*e-a)*2*Math.PI/f))+c},easeOutElastic:function(a,b,c,d,e){a=1.70158;var f=0,g=d;if(b==0)return c;if((b/=e)==1)return c+d;f||(f=e*.3);if(g<Math.abs(d)){g=d;a=f/4}else a=f/(2*Math.PI)*Math.asin(d/g);return g*Math.pow(2,-10*b)*Math.sin((b*e-a)*2*Math.PI/f)+d+c},easeInOutElastic:function(a,b,c,d,e){a=1.70158;var f=0,g=d;if(b==0)return c;if((b/=e/2)==2)return c+d;f||(f=e*.3*1.5);if(g<Math.abs(d)){g=d;a=f/4}else a=f/(2*Math.PI)*Math.asin(d/g);if(b<1)return-.5*g*Math.pow(2,10*(b-=1))*Math.sin((b*e-a)*2*Math.PI/f)+c;return g*Math.pow(2,-10*(b-=1))*Math.sin((b*e-a)*2*Math.PI/f)*.5+d+c},easeInBack:function(a,c,d,e,f,g){if(g==b)g=1.70158;return e*(c/=f)*c*((g+1)*c-g)+d},easeOutBack:function(a,c,d,e,f,g){if(g==b)g=1.70158;return e*((c=c/f-1)*c*((g+1)*c+g)+1)+d},easeInOutBack:function(a,c,d,e,f,g){if(g==b)g=1.70158;if((c/=f/2)<1)return e/2*c*c*(((g*=1.525)+1)*c-g)+d;return e/2*((c-=2)*c*(((g*=1.525)+1)*c+g)+2)+d},easeInBounce:function(b,c,d,e,f){return e-a.easing.easeOutBounce(b,f-c,0,e,f)+d},easeOutBounce:function(a,b,c,d,e){return(b/=e)<1/2.75?d*7.5625*b*b+c:b<2/2.75?d*(7.5625*(b-=1.5/2.75)*b+.75)+c:b<2.5/2.75?d*(7.5625*(b-=2.25/2.75)*b+.9375)+c:d*(7.5625*(b-=2.625/2.75)*b+.984375)+c},easeInOutBounce:function(b,c,d,e,f){if(c<f/2)return a.easing.easeInBounce(b,c*2,0,e,f)*.5+d;return a.easing.easeOutBounce(b,c*2-f,0,e,f)*.5+e*.5+d}})}(jQuery);(function(a){a.effects.highlight=function(c){return this.queue(function(){var d=a(this),e=["backgroundImage","backgroundColor","opacity"],f=a.effects.setMode(d,c.options.mode||"show"),g={backgroundColor:d.css("backgroundColor")};if(f=="hide")g.opacity=0;a.effects.save(d,e);d.show().css({backgroundImage:"none",backgroundColor:c.options.color||"#ffff99"}).animate(g,{queue:false,duration:c.duration,easing:c.options.easing,complete:function(){f=="hide"&&d.hide();a.effects.restore(d,e);f=="show"&&!a.support.opacity&&this.style.removeAttribute("filter");c.callback&&c.callback.apply(this,arguments);d.dequeue()}})})}})(jQuery);(function(a){a.effects.slide=function(b){return this.queue(function(){var e=a(this),f=["position","top","left"],g=a.effects.setMode(e,b.options.mode||"show"),h=b.options.direction||"left";a.effects.save(e,f);e.show();a.effects.createWrapper(e).css({overflow:"hidden"});var i=h=="up"||h=="down"?"top":"left";h=h=="up"||h=="left"?"pos":"neg";var j=b.options.distance||(i=="top"?e.outerHeight({margin:true}):e.outerWidth({margin:true}));if(g=="show")e.css(i,h=="pos"?-j:j);var k={};k[i]=(g=="show"?h=="pos"?"+=":"-=":h=="pos"?"-=":"+=")+j;e.animate(k,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){g=="hide"&&e.hide();a.effects.restore(e,f);a.effects.removeWrapper(e);b.callback&&b.callback.apply(this,arguments);e.dequeue()}})})}})(jQuery);(function(a){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable");this.dragged=false;var c;this.refresh=function(){c=a(b.options.filter,b.element[0]);c.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:false,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})};this.refresh();this.selectees=c.addClass("ui-selectee");this._mouseInit();this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(b){var c=this;this.opos=[b.pageX,b.pageY];if(!this.options.disabled){var d=this.options;this.selectees=a(d.filter,this.element[0]);this._trigger("start",b);a(d.appendTo).append(this.helper);this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0});d.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=true;if(!b.metaKey){d.$element.removeClass("ui-selected");d.selected=false;d.$element.addClass("ui-unselecting");d.unselecting=true;c._trigger("unselecting",b,{unselecting:d.element})}});a(b.target).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){var g=!b.metaKey||!d.$element.hasClass("ui-selected");d.$element.removeClass(g?"ui-unselecting":"ui-selected").addClass(g?"ui-selecting":"ui-unselecting");d.unselecting=!g;d.selecting=g;(d.selected=g)?c._trigger("selecting",b,{selecting:d.element}):c._trigger("unselecting",b,{unselecting:d.element});return false}})}},_mouseDrag:function(b){var c=this;this.dragged=true;if(!this.options.disabled){var d=this.options,f=this.opos[0],g=this.opos[1],h=b.pageX,i=b.pageY;if(f>h){var j=h;h=f;f=j}if(g>i){j=i;i=g;g=j}this.helper.css({left:f,top:g,width:h-f,height:i-g});this.selectees.each(function(){var j=a.data(this,"selectable-item");if(!(!j||j.element==c.element[0])){var k=false;if(d.tolerance=="touch")k=!(j.left>h||j.right<f||j.top>i||j.bottom<g);else if(d.tolerance=="fit")k=j.left>f&&j.right<h&&j.top>g&&j.bottom<i;if(k){if(j.selected){j.$element.removeClass("ui-selected");j.selected=false}if(j.unselecting){j.$element.removeClass("ui-unselecting");j.unselecting=false}if(!j.selecting){j.$element.addClass("ui-selecting");j.selecting=true;c._trigger("selecting",b,{selecting:j.element})}}else{if(j.selecting)if(b.metaKey&&j.startselected){j.$element.removeClass("ui-selecting");j.selecting=false;j.$element.addClass("ui-selected");j.selected=true}else{j.$element.removeClass("ui-selecting");j.selecting=false;if(j.startselected){j.$element.addClass("ui-unselecting");j.unselecting=true}c._trigger("unselecting",b,{unselecting:j.element})}if(j.selected)if(!b.metaKey&&!j.startselected){j.$element.removeClass("ui-selected");j.selected=false;j.$element.addClass("ui-unselecting");j.unselecting=true;c._trigger("unselecting",b,{unselecting:j.element})}}}});return false}},_mouseStop:function(b){var c=this;this.dragged=false;a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=false;d.startselected=false;c._trigger("unselected",b,{unselected:d.element})});a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=false;d.selected=true;d.startselected=true;c._trigger("selected",b,{selected:d.element})});this._trigger("stop",b);this.helper.remove();return false}});a.extend(a.ui.selectable,{version:"1.8.4"})})(jQuery);(function(a){a.extend(a.fn,{livequery:function(b,c,d){var e=this,f;if(a.isFunction(b)){d=c,c=b,b=undefined}a.each(a.livequery.queries,function(a,h){if(e.selector==h.selector&&e.context==h.context&&b==h.type&&(!c||c.$lqguid==h.fn.$lqguid)&&(!d||d.$lqguid==h.fn2.$lqguid)){return(f=h)&&false}});f=f||new a.livequery(this.selector,this.context,b,c,d);f.stopped=false;f.run();return this},expire:function(b,c,d){var e=this;if(a.isFunction(b)){d=c,c=b,b=undefined}a.each(a.livequery.queries,function(g,h){if(e.selector==h.selector&&e.context==h.context&&(!b||b==h.type)&&(!c||c.$lqguid==h.fn.$lqguid)&&(!d||d.$lqguid==h.fn2.$lqguid)&&!this.stopped){a.livequery.stop(h.id)}});return this}});a.livequery=function(b,c,d,e,f){this.selector=b;this.context=c||document;this.type=d;this.fn=e;this.fn2=f;this.elements=[];this.stopped=false;this.id=a.livequery.queries.push(this)-1;e.$lqguid=e.$lqguid||a.livequery.guid++;if(f){f.$lqguid=f.$lqguid||a.livequery.guid++}return this};a.livequery.prototype={stop:function(){var a=this;if(this.type){this.elements.unbind(this.type,this.fn)}else{if(this.fn2){this.elements.each(function(b,d){a.fn2.apply(d)})}}this.elements=[];this.stopped=true},run:function(){if(this.stopped){return}var b=this;var c=this.elements,d=a(this.selector,this.context),e=d.not(c);this.elements=d;if(this.type){e.bind(this.type,this.fn);if(c.length>0){a.each(c,function(c,e){if(a.inArray(e,d)<0){a.event.remove(e,b.type,b.fn)}})}}else{e.each(function(){b.fn.apply(this)});if(this.fn2&&c.length>0){a.each(c,function(c,e){if(a.inArray(e,d)<0){b.fn2.apply(e)}})}}}};a.extend(a.livequery,{guid:0,queries:[],queue:[],running:false,timeout:null,checkQueue:function(){if(a.livequery.running&&a.livequery.queue.length){var b=a.livequery.queue.length;while(b--){a.livequery.queries[a.livequery.queue.shift()].run()}}},pause:function(){a.livequery.running=false},play:function(){a.livequery.running=true;a.livequery.run()},registerPlugin:function(){a.each(arguments,function(b,c){if(!a.fn[c]){return}var d=a.fn[c];a.fn[c]=function(){var b=d.apply(this,arguments);a.livequery.run();return b}})},run:function(b){if(b!=undefined){if(a.inArray(b,a.livequery.queue)<0){a.livequery.queue.push(b)}}else{a.each(a.livequery.queries,function(b){if(a.inArray(b,a.livequery.queue)<0){a.livequery.queue.push(b)}})}if(a.livequery.timeout){clearTimeout(a.livequery.timeout)}a.livequery.timeout=setTimeout(a.livequery.checkQueue,20)},stop:function(b){if(b!=undefined){a.livequery.queries[b].stop()}else{a.each(a.livequery.queries,function(b){a.livequery.queries[b].stop()})}}});a.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove");a(function(){a.livequery.play()});var b=a.prototype.init;a.prototype.init=function(a,c){var d=b.apply(this,arguments);if(a&&a.selector){d.context=a.context,d.selector=a.selector}if(typeof a=="string"){d.context=c||document,d.selector=a}return d};a.prototype.init.prototype=a.prototype})(jQuery);var TINY={};TINY.box=function(){var a,b,c,d,e,f,g,h,i,j=0;return{show:function(d,k,l,n,o,q){if(!j){a=document.createElement("div");a.id="tinybox";b=document.createElement("div");b.id="tinymask";c=document.createElement("div");c.id="tinycontent";document.body.appendChild(b);document.body.appendChild(a);a.appendChild(c);window.onresize=TINY.box.resize;j=1}if(!o&&!k){a.style.width=l?l+"px":"auto";a.style.height=n?n+"px":"auto";a.style.backgroundImage="none";c.innerHTML=d}else{c.style.display="none";a.style.width=a.style.height="100px"}this.mask();e=d;f=k;g=l;h=n;i=o;this.alpha(b,1,45,1);if(q){setTimeout(function(){TINY.box.hide()},1e3*q)}},fill:function(b,c,d,e,f){if(c){a.style.backgroundImage="";var g=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");g.onreadystatechange=function(){if(g.readyState==4&&g.status==200){TINY.box.psh(g.responseText,d,e,f)}};g.open("GET",b,1);g.send(null)}else{this.psh(b,d,e,f)}},psh:function(b,d,e,f){if(f){if(!d||!e){var g=a.style.width,h=a.style.height;c.innerHTML=b;a.style.width=d?d+"px":"";a.style.height=e?e+"px":"";c.style.display="";d=parseInt(c.offsetWidth);e=parseInt(c.offsetHeight);c.style.display="none";a.style.width=g;a.style.height=h}else{c.innerHTML=b}this.size(a,d,e)}else{a.style.backgroundImage="none"}},hide:function(){TINY.box.alpha(a,-1,0,0)},resize:function(){TINY.box.pos();TINY.box.mask()},mask:function(){b.style.height=TINY.page.total(1)+"px";b.style.width="";b.style.width=TINY.page.total(0)+"px"},pos:function(){var b=TINY.page.height()/2-a.offsetHeight/2;b=b<10?10:b;a.style.top=b+TINY.page.top()+"px";a.style.left=TINY.page.width()/2-a.offsetWidth/2+"px"},alpha:function(a,b,c){clearInterval(a.ai);if(b==1){a.style.opacity=0;a.style.filter="alpha(opacity=0)";a.style.display="block";this.pos()}a.ai=setInterval(function(){TINY.box.ta(a,c,b)},1)},ta:function(d,j,k){var l=Math.round(d.style.opacity*100);if(l==j){clearInterval(d.ai);if(k==-1){d.style.display="none";d==a?TINY.box.alpha(b,-1,0,2):c.innerHTML=a.style.backgroundImage=""}else{d==b?this.alpha(a,1,100):TINY.box.fill(e,f,g,h,i)}}else{var n=Math.ceil(l+(j-l)*.5);n=n==1?0:n;d.style.opacity=n/100;d.style.filter="alpha(opacity="+n+")"}},size:function(a,b,c){a=typeof a=="object"?a:T$(a);clearInterval(a.si);var d=a.offsetWidth,e=a.offsetHeight,f=d-parseInt(a.style.width),g=e-parseInt(a.style.height);var h=d-f>b?0:1,i=e-g>c?0:1;a.si=setInterval(function(){TINY.box.ts(a,b,f,h,c,g,i)},20)},ts:function(b,d,e,f,g,h,i){var j=b.offsetWidth-e,k=b.offsetHeight-h;if(j==d&&k==g){clearInterval(b.si);a.style.backgroundImage="none";c.style.display="block"}else{if(j!=d){var l=j+(d-j)*.5;b.style.width=f?Math.ceil(l)+"px":Math.floor(l)+"px"}if(k!=g){var l=k+(g-k)*.5;b.style.height=i?Math.ceil(l)+"px":Math.floor(l)+"px"}this.pos()}}}}();TINY.page=function(){return{top:function(){return document.documentElement.scrollTop||document.body.scrollTop},width:function(){return self.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},height:function(){return self.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},total:function(a){var b=document.body,c=document.documentElement;return a?Math.max(Math.max(b.scrollHeight,c.scrollHeight),Math.max(b.clientHeight,c.clientHeight)):Math.max(Math.max(b.scrollWidth,c.scrollWidth),Math.max(b.clientWidth,c.clientWidth))}}}();(function(a){function c(a){this.content=a;this.shown=false}function b(){}a.fn.colorTip=function(d){var e={color:"yellow",timeout:200};var f=["red","green","blue","white","yellow","black"];d=a.extend(e,d);return this.each(function(){var e=a(this);if(!e.attr("title")){return true}var g=new b;var h=new c(e.attr("title"));e.append(h.generate()).addClass("colorTipContainer");var i=false;for(var j=0;j<f.length;j++){if(e.hasClass(f[j])){i=true;break}}if(!i){e.addClass(d.color)}e.hover(function(){h.show();g.clear()},function(){g.set(function(){h.hide()},d.timeout)});e.removeAttr("title")})};b.prototype={set:function(a,b){this.timer=setTimeout(a,b)},clear:function(){clearTimeout(this.timer)}};c.prototype={generate:function(){return this.tip||(this.tip=a('<span class="colorTip">'+this.content+'<span class="pointyTipShadow"></span><span class="pointyTip"></span></span>'))},show:function(){if(this.shown){return}this.tip.css("margin-left",-this.tip.outerWidth()/2).fadeIn("fast");this.shown=true},hide:function(){this.tip.fadeOut();this.shown=false}}})(jQuery);if(!this.JSON){this.JSON={}}(function(){function str(a,b){var c,d,e,f,g=gap,h,i=b[a];if(i&&typeof i==="object"&&typeof i.toJSON==="function"){i=i.toJSON(a)}if(typeof rep==="function"){i=rep.call(b,a,i)}switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i){return"null"}gap+=indent;h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1){h[c]=str(c,i)||"null"}e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]";gap=g;return e}if(rep&&typeof rep==="object"){f=rep.length;for(c=0;c<f;c+=1){d=rep[c];if(typeof d==="string"){e=str(d,i);if(e){h.push(quote(d)+(gap?": ":":")+e)}}}}else{for(d in i){if(Object.hasOwnProperty.call(i,d)){e=str(d,i);if(e){h.push(quote(d)+(gap?": ":":")+e)}}}}e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}";gap=g;return e}}function quote(a){escapable.lastIndex=0;return escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function f(a){return a<10?"0"+a:a}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;if(typeof JSON.stringify!=="function"){JSON.stringify=function(a,b,c){var d;gap="";indent="";if(typeof c==="number"){for(d=0;d<c;d+=1){indent+=" "}}else if(typeof c==="string"){indent=c}rep=b;if(b&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":a})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e==="object"){for(c in e){if(Object.hasOwnProperty.call(e,c)){d=walk(e,c);if(d!==undefined){e[c]=d}else{delete e[c]}}}}return reviver.call(a,b,e)}var j;text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();var FE=FE||{};FE.Engine=FE.Engine||{};FE.UI=FE.UI||{};var isSupported=function(){var a=document.createElement("div"),b="Webkit Ms O Moz Khtml".split(" "),c=b.length;return function(d){if(d in a.style)return true;d=d.replace(/^[a-z]/,function(a){return a.toUpperCase()});while(c--){if(b[c]+d in a.style){return true}}return false}}();FE.UI.inputLeftPad='<div class="button_container_" style="float: right; margin-right: 5px;"><span class="button"><span>',FE.UI.inputRightPad="</span></span></div>",FE.UI.inputFieldAddon="";$(function(){function c(a){var b=$("#loadSelClick");if(!a)b.attr("checked",!b.attr("checked"));if(b.is(":checked")){b.attr("title","Click to Disable");var c=$("#reportType :selected").val()=="0"?"undefined":tRim($("#reportType :selected").text());loadList(true,c)}else{b.attr("title","Click to Enable")}}function b(a){var b=$("#ecoClick");if(!a)b.attr("checked",!b.attr("checked"));if(b.is(":checked")){b.attr("title","Lights ON");$("body").stop().animate({backgroundColor:"#959595"},300);$(".widgeT, #straightLineDiv, #toolBar").stop().animate({backgroundColor:"#d3d3d3"},300)}else{b.attr("title","Save Energy");$("body").stop().animate({backgroundColor:"#f9fdff"},300);$(".widgeT").stop().animate({backgroundColor:"#f2fbff"},300);$("#straightLineDiv, #toolBar").stop().animate({backgroundColor:"#DAEAF4"},300)}}if(isSupported("borderRadius")){$("body").prepend('<link href="css/css3.css" type="text/css" rel="stylesheet">');$("#btnsTable").find("td").each(function(){var a=$(this).find("input").addClass("button");$(this).empty().append(a)});FE.UI.inputLeftPad="";FE.UI.inputRightPad="",FE.UI.inputFieldAddon=' class="button" '}else{document.createStyleSheet("css/images.css");$("input[type=button]").focusin(function(){$(this).parent(".button_container_ .button span").css("background","url(images/bg-btn-corp2-focus.png) no-repeat left top");$(this).offsetParent().css("background","url(images/bg-btn-corp2-focus.png) no-repeat right top")}).focusout(function(){$(".button_container_ .button").css("background","url(images/bg-btn-corp2.png) no-repeat right top");$(".button_container_ .button span").css("background","url(images/bg-btn-corp2.png) no-repeat left top")});$("input[type=button]").mouseover(function(){$(this).parent(".button_container_ .button span").css("background","url(images/bg-btn-corp2-hover.png) no-repeat left top");$(this).offsetParent().css("background","url(images/bg-btn-corp2-hover.png) no-repeat right top")}).mouseout(function(){$(".button_container_ .button").css("background","url(images/bg-btn-corp2.png) no-repeat right top");$(".button_container_ .button span").css("background","url(images/bg-btn-corp2.png) no-repeat left top")})}workBoard.find("div.hasElem").live("click",function(){$(".unitDiv","#playGroundTable").removeClass("isSelected");$(".formulaElem ","div#theFormulae").removeClass("isSelected");$(this).addClass("isSelected");$("#straightLineDiv").find("span").removeClass("glow");$("#straightLineDiv").find('span[pointer="'+this.id+'"]').addClass("glow");return false});$("div.formulaElem","div#theFormulae").live("click",function(){$(".unitDiv","#playGroundTable").removeClass("isSelected");$("div.formulaElem ","div#theFormulae").removeClass("isSelected");$(this).addClass("isSelected")});$("#straightLineDiv").find("span[pointer]").live("click",function(a){$("#straightLineDiv").find("span").removeClass("glow");$(this).addClass("glow");var b=$(this).attr("pointer");$("#playGroundTable").find(".unitDiv").removeClass("isSelected");$("#theFormulae").find(".formulaElem").removeClass("isSelected");$("#"+b).addClass("isSelected")});$("#resetPG").click(function(){if($("div.hasElem","#wBoard").length>0){var a=$("div.hasSubForm").length;if(confirm("- This will Clear All Components and Reset Work Board. Proceed? -")){highLightPG();clearWB();workBoard.next("div#subFormula").html("").remove();workBoard.css("border","none");if($("#formulaBeingEdited").data("theData")){$("#formulaBeingEdited").removeData("theData");var b=$("#theResultsTable").find("td.info").find("#descTable");b.find("td.cName, td.rType, td.fName, td.prevRType").text("..")}if(a)workBoard.animate({height:"710px"},{color:"#e8e8e8"},500,"linear");$("#modeTable").find("#addMod").trigger("click")}}else{highLightPG(alert("- Nothing to Clear -"))}});var a=$('<div id="subFormula" class="subFormula"> </div>');$("div.hasSubForm","#wBoard").live("dblclick",function(b){var c=$(this).find("div.subDrag"),d=c.data("theData");if($("#parentTable").find("#subFormula").length==0)workBoard.animate({height:"439px"},300,"linear",function(){$(this).after(a)});workBoard.css("border","1px solid #3c4d55");var e=a.find('fieldset[fid="'+d.fID+'"]');if(e.length<1){var f=d.fID+"."+fileExt;$.ajax({type:"POST",url:"fileOps.php",data:"action=loadingContents&reportType="+d.reportType+"&fileName="+f,processData:true,dataType:"json",success:function(b){var c=b.formulaData.length-1,e="";for(var f=0;f<c;f++){var g=b.formulaData[f],h="",i="";if(g.type=="formula"){h="sfd hasSubForm";i=g.text}else if(g.type=="operator"||g.type=="number"){h="signS";i=setText(g.dataelem)?setText(g.dataelem):g.text}else{h="sfd";i=g.text}e+='<span class="'+h+'">'+i+"</span>"}var j=$('<fieldset fid="'+d.fID+'" class="borderstyle2"><legend>'+d.formulaName+"</legend></fieldset>");j.append(e);a.append(j)}})}else{e.find("legend").effect("highlight",{color:"#6d3c36"},500)}});$(".widgeT").each(function(){$(this).data("cssProps",{origHeight:$(this).height(),origWidth:$(this).width()})});$(".minMax","div.widgeT").toggle(function(){var a=$(this).closest(".widgeT");$(this).closest(".legend").siblings().stop().animate({height:"toggle"},200);a.stop().animate({height:"25px",width:"110px"},500);$(this).attr("src","images/max.png")},function(){var a=$(this).closest(".widgeT");a.stop().animate({height:a.data("cssProps").origHeight+"px",width:a.data("cssProps").origWidth},200);$(this).closest(".legend").siblings().stop().animate({height:"toggle"},500);$(this).attr("src","images/min.png")});$("div.widgeT").find(".close").click(function(){$(this).closest(".widgeT").stop().fadeOut("fast");createToolbarBtn($(this).attr("restid"),tRim($(this).closest(".legend").text()),$(this).closest(".widgeT").attr("id"))});$("#widgetsToggle").click(function(){var a=$(this).attr("state");operands=a=="inactive"?$("div.widgeT").not(":hidden").find(".close"):$("#toolBar").find(".toolbarBtn"),newState=a=="inactive"?"active":"inactive",textVal=a=="inactive"?"Open All":"Close All";$(this).attr("state",newState).text(textVal);operands.trigger("click");$("#toolBar").effect("highlight",{color:"#a9d1e7"},250)});$(".toolbarBtn","#toolBar").live("click",function(){if($("#toolBar").find(".toolbarBtn").length==1)$("#widgetsToggle").attr("state","inactive").text("Close All");restoreWidget($(this).attr("id"),$(this).attr("willrestore"))});$("#ecoClick").click(b);$("#loadSelClick").click(c);$("#ecoTrig").click(function(){b(false)});$("#loadSelTrig").click(function(){c(false)});$('input[id="addMod"]',"#modeTable").click(function(){$("td.save","#btnsTable").show();$("td.edit","#btnsTable").hide();$("#businessVer").attr("disabled",true);$("#formulaNameSel").attr("disabled",true);$("#deleteBtn","#btnsTable").attr("disabled",true);$("#savePop","#btnsTable").attr("disabled",false);$("#updateFormula","#btnsTable").attr("disabled",false);$(this).closest(".widgeT").stop().animate({width:"190px"},100)});$('input[id="editMod"]',"#modeTable").click(function(){$("td.edit","#btnsTable").show();$("td.save","#btnsTable").hide();$("#businessVer").attr("disabled",false);$("#formulaNameSel").attr("disabled",false);$("#deleteBtn","#btnsTable").attr("disabled",true);$("#savePop","#btnsTable").attr("disabled",false);$("#updateFormula","#btnsTable").attr("disabled",false);$(this).closest(".widgeT").stop().animate({width:"210px"},100)});$('input[id="deleteMod"]',"#modeTable").click(function(){$("#businessVer").attr("disabled",false);$("#formulaNameSel").attr("disabled",false);$("#deleteBtn","#btnsTable").attr("disabled",false);$("#savePop","#btnsTable").attr("disabled",true);$("#updateFormula","#btnsTable").attr("disabled",true)});$("#modeTable").find("#addMod").trigger("click");if(needExtraIEefforts){$(".padTD2").css("padding","5px 1px");$(".padTD3").css("padding","5px 1px");$(".toolBtns ").css("margin","-12px 2px");$(".legend ").css("margin-top","5px")}else{$(".padTD2").css("padding","5px 1px");$(".padTD3").css("padding","5px 1px")}$(".scrollFunc").hover(function(){$(this).css("overflow-y","scroll")},function(){$(this).css("overflow-y","hidden")});$(".legend").hover(function(){$(this).stop().animate({backgroundColor:"#b5dfe1"})},function(){$(this).stop().animate({backgroundColor:"#d9ecf4"})});if(isIElessThan8||needExtraIEefforts){$(".formTable td").css("padding-top","0");$("#ecoClick").css("top","0")}if(isIElessThan8){$(".toolBtns").css("margin","-12px 2px")}});$(function(){if(!$.support.ajax){}$.ajaxSetup({error:function(a,b){$("#tinycontent").click(function(){TINY.box.hide();$("#tinycontent").unbind("click")});if(a.status==0||a.status==404){notifyAJAXSpt()}else if(a.status==500){notifyAJAXSpt("Internel Server Error.")}else if(b=="parsererror"){console.log("Error.\nParsing JSON Request failed. Really need to check this -- ",b)}else if(b=="timeout"){notifyAJAXSpt("Request Time out.")}else{notifyAJAXSpt("Unknow Error.\n"+a.responseText)}}})})